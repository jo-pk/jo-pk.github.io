---
layout: post
title: "[Effective Java] Item18. 상속보다는 컴포지션을 사용하라"
description: 들어가며
categories: self
---

Author: seovalue

> 아이템 18. 상속보다는 컴포지션을 사용하라.

메서드 호출과 달리 상속은 캡슐화를 깨트릴 "수" 있다. 예를 들어 부모 클래스의 구현이 변경되었을 때 하위 클래스까지 그 영향이 전파될 수 있다. HashSet의 예로서 HashSet의 addAll 메서드는 내부적으로 add를 사용하고 있는데, 만약 상속받은 클래스에서 add를 Override해서 다르게 구현한다면 하위클래스에서 addAll을 호출했을 때 예상과 다른 결과를 얻을 수 있다. 

따라서 이러한 문제를 해결하기 위해 기존 클래스를 확장하는 대신, 새로운 클래스를 만들고 private 필드로 기존 클래스의 인스턴스를 참조하게 하는 방법을 컴포지션이라고 한다. 이는 forwarding방식으로 기존 클래스의 대응하는 메서드를 호출해 그 결과를 반환한다.

1. 새로운 클래스는 기존 클래스의 내부 구현 방식의 영향에서 벗어난다.
2. 기존 클래스에서 새로운 메서드가 추가되더라도 전혀 영향받지 않는다.


상속은 하위 클래스가 상위 클래스의 진짜 하위 타입인 상황, 즉 is-a 관계일 때만 사용해야한다. 상속을 고려하고 있는 하위 클래스에 대해 이 하위 클래스가 정말 상위 클래스인가? 를 고려해보자.
