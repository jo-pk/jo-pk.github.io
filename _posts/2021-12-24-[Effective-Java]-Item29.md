---
layout: post
title: "[Effective Java] Item29. 이왕이면 제네릭 타입으로 만들라"
description:
categories: self
---

Author: seovalue

> 아이템 29. 이왕이면 제네릭 타입으로 만들라

-----

Author: PK

실체화 불가능한 타입으로는 배열을 만들 수 없다.<br>
배열이 있는 코드를 제네릭으로 바꾸려고 할 때 이 사실 때문에 고민이 생길 것이다.<br>
이에 대한 해결책은 두 가지다:
1. 제네릭 배열 생성을 금지하는 제약을 대놓고 우회한다.
2. E[] 배열을 Object[] 타입으로 바꾼다.

### 1. 제네릭 배열 생성을 금지하는 제약을 대놓고 우회한다.
```java
return (E[]) new Object[1];
```
컴파일러가 제 할 일을 하겠지만, 경고는 나타낸다. 하지만 비검사 형변환이 안전하다는 확인이 있으면
애너테이션을 활용해서 경고를 무시할 수 있다.<br>

장점:
* 가독성이 좋다.
* 코드가 더 짧다. 두 번째 방식은 배열에서 원소를 읽을 때마다 형변환을 해줘야 한다.
* 현업에서는 해당 방식을 선호한다.

### 2. E[] 배열을 Object[] 타입으로 바꾼다.
```java
E result = (E) elements[--size];
```
E 는 실체화 불가능한 타입이라서 컴파일러가 런타임에 이뤄지는 형변환이 안전한지 알 방법이 없다.
그래서 이 역시 형변환이 안전한지 확신을 가졌을 때 사용하고, 애너테이션을 활용해서 경고를 무시해야 한다.

장점:
* 첫 번째 방식은 E 가 Object 가 아닌 한 배열의 런타임 타입이 컴파일타임 타입과 달라 힙 오염을 일으킨다.
