---
layout: post
title: "[Effective Java] Item21. 인터페이스는 구현하는 쪽을 생각해 설계하라"
description: 들어가며
categories: self
---

Author: seovalue

> 아이템 21. 인터페이스는 구현하는 쪽을 생각해 설계하라.

인터페이스에 메서드를 추가하게 되는 경우, 해당 인터페이스를 구현하는 모든 곳에서 그 인터페이스를 구현해주어야하는 문제가 발생한다. 이는 인터페이스는 변경될 수 없다는 것을 기본으로 설계되었기 때문이다. 최근에는 인터페이스 내부 default 메서드를 통해서도 구현체가 있는 메서드를 제공할 수 있지만, 이는 해당 인터페이스를 구현하고 있는 클래스에서 또다른 문제를 일으킬 수 있다. (메서드 명이 같다던지.. 시그니처가 같다던지..) 

-----

Author: PK

인터페이스에 디폴트 메서드를 만들면 구현체 클래스에서 모두 해당 메서드 구현을 사용하게 된다.<br>
물론 재정의하면 재정의한 방식으로 사용한다.<br>
디폴트 메서드는 자바 8에서 추가되었는데, 자바 7까지만 해도 자바는 
> 현재의 인터페이스에 새로운 메서드가 추가될 일은 영원히 없다

는... 지금 생각해보면 말도 안되는 아이디어를 가지고 있었다. 다행히 자바 8부터는 그렇지 않다.
하지만 잘 생각해보면, 인터페이스는 추상화한 개념이고, 구현체는 디테일한 작업 과정이다.
그렇기 때문에 메서드 구현을 추상화를 위한 인터페이스에서 하다보면, 그 구현이 각각의 구현체에
모두 만족하는 상황을 만들기가 매우 어려워진다.<br>

대표적인 예시로, Collection 인터페이스에 디폴트 메서드를 추가했을 때, 그 인터페이스를 구현하는
모든 클래스에 만족하는 메서드를 만들기란 하늘에서 별따기만큼 어렵다. Collection 의 구현체 중 하나로,
`SynchronizedCollection` 이란 구현체가 있는데, 클라이언트가 제공한 객체로 락을 거는 능력을 추가로 제공하는 래퍼 클래스다. 과연 Collection 에 추가된 해당 메서드가 이 클래스의 작동 방식을 다 인지한 상태로 구현될까? 그렇지 않다. 컴파일 과정에서 에러가 발생하지 않더라도 런타임 에러가 발생할 확률이 매우 높다.<br>

자바 플랫폼 라이브러리에서는 그래서 디폴트 메서드를 재정의하고, 다른 메서드에서는 디폴트 메서드를 호출하기 전에 필요한 작업을 수행하도록 했다.<br>
